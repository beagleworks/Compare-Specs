# 実装計画

- [ ] 1. プロジェクト構造とコア設定の作成
  - Deno + Honoプロジェクトの基本構造を作成
  - TypeScript設定とimport mapの設定
  - 基本的なディレクトリ構造（backend, frontend, shared）の作成
  - _要件: 要件1.1, 技術要件_

- [ ] 2. データベーススキーマとモデルの実装
  - SQLiteデータベースの初期化スクリプト作成
  - journal_vouchers, voucher_entries, account_items, app_settingsテーブルの作成
  - TypeScript型定義（JournalVoucher, VoucherEntry, AccountItem）の実装
  - _要件: 要件4.1, 要件4.2_

- [ ] 3. データベース操作関数の実装
  - SQLite接続とクエリ実行のユーティリティ関数作成
  - 振替伝票CRUD操作の関数実装（create, read, update, delete）
  - 勘定科目マスタデータの取得関数実装
  - _要件: 要件4.1, 要件4.3, 要件4.4_

- [ ] 4. 認証機能の実装
  - パスワードハッシュ化とセッション管理の実装
  - 認証ミドルウェアの作成
  - パスワード設定・変更API（POST /api/auth/set-password, POST /api/auth/login）の実装
  - _要件: 要件5.1, 要件5.2, 要件5.3, 要件5.4_

- [ ] 5. 振替伝票API エンドポイントの実装
  - GET /api/vouchers（一覧取得・検索）の実装
  - POST /api/vouchers（新規作成）の実装
  - GET /api/vouchers/:id（詳細取得）の実装
  - PUT /api/vouchers/:id（更新）の実装
  - DELETE /api/vouchers/:id（削除）の実装
  - _要件: 要件1.1, 要件4.1, 要件6.1, 要件6.3, 要件6.4_

- [ ] 6. 勘定科目API エンドポイントの実装
  - GET /api/accounts（勘定科目一覧取得）の実装
  - 一般的な勘定科目のマスタデータ投入
  - 「その他」オプションを含む勘定科目選択機能の実装
  - _要件: 要件1.2, 要件1.3_

- [ ] 7. バリデーション機能の実装
  - 借方・貸方合計金額の一致チェック関数実装
  - 入力値バリデーション（日付、金額、必須項目）の実装
  - エラーレスポンス形式の統一化
  - _要件: 要件2.1, 要件2.2, 要件2.3_

- [ ] 8. Reactアプリケーションの基本構造作成
  - React + TypeScriptプロジェクトのセットアップ
  - ルーティング設定（React Router）
  - 基本的なコンポーネント構造の作成
  - _要件: 要件1.1_

- [ ] 9. 認証コンポーネントの実装
  - AuthGuardコンポーネントの実装
  - PasswordModalコンポーネントの実装
  - 認証状態管理（useAuth hook）の実装
  - _要件: 要件5.1, 要件5.2, 要件5.3, 要件5.4_

- [ ] 10. 振替伝票入力フォームの実装
  - VoucherFormコンポーネントの実装
  - DateInput, AccountSelector, AmountInput, DescriptionInputコンポーネントの実装
  - 勘定科目プルダウンと「その他」自由入力機能の実装
  - _要件: 要件1.1, 要件1.2, 要件1.3_

- [ ] 11. リアルタイム合計計算とバリデーションの実装
  - BalanceValidatorコンポーネントの実装
  - 借方・貸方合計の自動計算機能
  - 合計不一致時のエラー表示と保存無効化
  - _要件: 要件1.4, 要件2.1, 要件2.2, 要件2.3_

- [ ] 12. 振替伝票一覧・検索機能の実装
  - VoucherListコンポーネントの実装
  - SearchFilterコンポーネント（日付範囲検索）の実装
  - VoucherItemコンポーネントの実装
  - _要件: 要件6.1, 要件6.2_

- [ ] 13. 振替伝票詳細表示・編集機能の実装
  - VoucherDetailコンポーネントの実装
  - VoucherDisplayコンポーネントの実装
  - 詳細表示から編集モードへの切り替え機能
  - _要件: 要件6.3, 要件6.4_

- [ ] 14. PDF生成・出力機能の実装
  - PDFExporterコンポーネントの実装
  - jsPDF + html2canvasを使用したPDF生成機能
  - 標準的な振替伝票レイアウトでのフォーマット実装
  - ダウンロード・印刷オプションの実装
  - _要件: 要件3.1, 要件3.2, 要件3.3_

- [ ] 15. エラーハンドリングとユーザビリティの向上
  - React Error Boundaryの実装
  - APIエラーレスポンスの統一的な処理
  - ローディング状態とユーザーフィードバックの実装
  - _要件: 要件4.4_

- [ ] 16. テストの実装
  - バックエンドAPI関数の単体テスト作成
  - 借方・貸方合計一致検証のテスト
  - Reactコンポーネントのテスト作成
  - 認証機能のテスト作成
  - _要件: 要件2.1, 要件2.2, 要件4.1, 要件5.1_

- [ ] 17. 統合テストとE2Eテストの実装
  - 振替伝票作成から保存までのE2Eテスト
  - PDF生成機能のテスト
  - 検索・一覧表示機能のテスト
  - _要件: 要件1.1, 要件3.1, 要件6.1_

- [ ] 18. 本番環境対応とデプロイメント準備
  - 環境変数による設定管理の実装
  - 静的ファイル配信の最適化
  - セキュリティヘッダーの設定
  - _技術要件_